CREATE TABLE ERS_REIMBURSEMENT (
  REIMB_ID NUMBER NOT NULL,
  REIMB_AMOUNT NUMBER NOT NULL,
  REIMB_SUBMITTED TIMESTAMP NOT NULL,
  REIMB_RESOLVED TIMESTAMP,
  REIMB_DESCRIPTION VARCHAR2(250),
  REIMB_RECEIPT BLOB,
  REIMB_AUTHOR NUMBER NOT NULL,
  REIMB_RESOLVER NUMBER,
  REIMB_STATUS_ID NUMBER NOT NULL,
  REIMB_TYPE_ID NUMBER NOT NULL,
  CONSTRAINT ERS_REIMBURSEMENT_PK PRIMARY KEY (REIMB_ID)
);
/

CREATE TABLE ERS_REIMBURSEMENT_STATUS (
  REIMB_STATUS_ID NUMBER NOT NULL,
  REIMB_STATUS VARCHAR2(10) NOT NULL,
  CONSTRAINT REIMB_STATUS_PK PRIMARY KEY (REIMB_STATUS_ID)
);
/

CREATE TABLE ERS_USERS (
  ERS_USERS_ID NUMBER NOT NULL,
  ERS_USERNAME VARCHAR2(50) NOT NULL,
  ERS_PASSWORD VARCHAR2(100) NOT NULL,
  USER_FIRST_NAME VARCHAR2(100) NOT NULL,
  USER_LAST_NAME VARCHAR2(100) NOT NULL,
  USER_EMAIL VARCHAR2(150) NOT NULL,
  USER_ROLE_ID NUMBER NOT NULL,
  CONSTRAINT ERS_USERS_PK PRIMARY KEY (ERS_USERS_ID),
  CONSTRAINT ERS_USERS__UNv1 UNIQUE (ERS_USERNAME),
  CONSTRAINT ERS_USERS__EMv1 UNIQUE (USER_EMAIL)
);
/

CREATE TABLE ERS_REIMBURSEMENT_TYPE (
  REIMB_TYPE_ID NUMBER NOT NULL,
  REIMB_TYPE VARCHAR2(10) NOT NULL,
  CONSTRAINT REIMB_TYPE_PK PRIMARY KEY (REIMB_TYPE_ID)
);
/

CREATE TABLE ERS_USER_ROLES (
  ERS_USER_ROLE_ID NUMBER NOT NULL,
  USER_ROLE VARCHAR2(50) NOT NULL,
  CONSTRAINT ERS_USER_ROLES_PK PRIMARY KEY(ERS_USER_ROLE_ID)
);
/

ALTER TABLE ERS_REIMBURSEMENT ADD CONSTRAINT ERS_USERS_FK_AUTH 
FOREIGN KEY (REIMB_AUTHOR) REFERENCES ERS_USERS (ERS_USERS_ID);
/

ALTER TABLE ERS_REIMBURSEMENT ADD CONSTRAINT ERS_USERS_FK_RESLVR 
FOREIGN KEY (REIMB_RESOLVER) REFERENCES ERS_USERS (ERS_USERS_ID);
/

ALTER TABLE ERS_REIMBURSEMENT ADD CONSTRAINT ERS_REIMBURSEMENT_STATUS_FK 
FOREIGN KEY (REIMB_STATUS_ID) REFERENCES ERS_REIMBURSEMENT_STATUS (REIMB_STATUS_ID);
/

ALTER TABLE ERS_REIMBURSEMENT ADD CONSTRAINT ERS_REIMBURSEMENT_TYPE_FK 
FOREIGN KEY (REIMB_TYPE_ID) REFERENCES ERS_REIMBURSEMENT_TYPE(REIMB_TYPE_ID);
/

ALTER TABLE ERS_USERS ADD CONSTRAINT USER_ROLES_FK 
FOREIGN KEY (USER_ROLE_ID) REFERENCES ERS_USER_ROLES(ERS_USER_ROLE_ID);
/

create sequence reimbursement_seq 
start with 1
increment by 1;
/

create or replace trigger reimbursement_trigger
  BEFORE INSERT ON ERS_REIMBURSEMENT
  FOR EACH ROW 
    DECLARE
      surrogate NUMBER;
    BEGIN
      select reimbursement_seq.nextval
      into surrogate
      from dual;
      :NEW.REIMB_ID := surrogate; 
    END;
/
insert into ERS_REIMBURSEMENT_STATUS (REIMB_STATUS_ID, REIMB_STATUS) values (1, 'Pending');
insert into ERS_REIMBURSEMENT_STATUS (REIMB_STATUS_ID, REIMB_STATUS) values (2, 'Approved');
insert into ERS_REIMBURSEMENT_STATUS (REIMB_STATUS_ID, REIMB_STATUS) values (3, 'Denied');
/
insert into ERS_REIMBURSEMENT_TYPE (REIMB_TYPE_ID, REIMB_TYPE) values (1, 'LODGING');
insert into ERS_REIMBURSEMENT_TYPE (REIMB_TYPE_ID, REIMB_TYPE) values (2, 'TRAVEL');
insert into ERS_REIMBURSEMENT_TYPE (REIMB_TYPE_ID, REIMB_TYPE) values (3, 'FOOD');
insert into ERS_REIMBURSEMENT_TYPE (REIMB_TYPE_ID, REIMB_TYPE) values (4, 'OTHER');
/

insert into ERS_USER_ROLES (ERS_USER_ROLE_ID, USER_ROLE) values (1, 'Physical Therapy Assistant');
insert into ERS_USER_ROLES (ERS_USER_ROLE_ID, USER_ROLE) values (2, 'Registered Nurse');
insert into ERS_USER_ROLES (ERS_USER_ROLE_ID, USER_ROLE) values (3, 'Media Manager');
insert into ERS_USER_ROLES (ERS_USER_ROLE_ID, USER_ROLE) values (4, 'Operator');
insert into ERS_USER_ROLES (ERS_USER_ROLE_ID, USER_ROLE) values (5, 'Registered Nurse');
insert into ERS_USER_ROLES (ERS_USER_ROLE_ID, USER_ROLE) values (6, 'Junior Executive');
insert into ERS_USER_ROLES (ERS_USER_ROLE_ID, USER_ROLE) values (7, 'VP Marketing');
insert into ERS_USER_ROLES (ERS_USER_ROLE_ID, USER_ROLE) values (8, 'Administrative Assistant');
insert into ERS_USER_ROLES (ERS_USER_ROLE_ID, USER_ROLE) values (9, 'Statistician');
insert into ERS_USER_ROLES (ERS_USER_ROLE_ID, USER_ROLE) values (10, 'Research Associate');
insert into ERS_USER_ROLES (ERS_USER_ROLE_ID, USER_ROLE) values (11, 'Finance Manager');
/
insert into ERS_USERS (ERS_USERS_ID, ERS_USERNAME, ERS_PASSWORD, USER_FIRST_NAME, USER_LAST_NAME, USER_EMAIL, USER_ROLE_ID) values (1, 'rprice0', '$2a$10$yPMYexvCpsj1mf.Eblnz3OcJSgYLiuYVwf33IqWCyeaKOt4vrlO2y', 'Robin', 'Price', 'rprice0@zdnet.com', 1);
insert into ERS_USERS (ERS_USERS_ID, ERS_USERNAME, ERS_PASSWORD, USER_FIRST_NAME, USER_LAST_NAME, USER_EMAIL, USER_ROLE_ID) values (2, 'plawson1', '$2a$10$VvuD7QIyKa0Cs2IOFV8d8ONNrfXJVjJQDN3c3f6hkHX5gVekq8W46', 'Paula', 'Lawson', 'plawson1@woothemes.com', 2);
insert into ERS_USERS (ERS_USERS_ID, ERS_USERNAME, ERS_PASSWORD, USER_FIRST_NAME, USER_LAST_NAME, USER_EMAIL, USER_ROLE_ID) values (4, 'fphillips3', '$2a$10$xtxwLiu8c90/Vj04EDeXCOaFNR5xHxgw93YGYwAPObAfQHQwi4U46', 'Frances', 'Phillips', 'fphillips3@weebly.com', 4);
insert into ERS_USERS (ERS_USERS_ID, ERS_USERNAME, ERS_PASSWORD, USER_FIRST_NAME, USER_LAST_NAME, USER_EMAIL, USER_ROLE_ID) values (5, 'jrogers4', '$2a$10$ZCrfJjyJ4dMS/FVRknfW6.RTykD5C2exr6dCmfGD8EhiqWjsTQdBO', 'John', 'Rogers', 'jrogers4@youtu.be', 5);
insert into ERS_USERS (ERS_USERS_ID, ERS_USERNAME, ERS_PASSWORD, USER_FIRST_NAME, USER_LAST_NAME, USER_EMAIL, USER_ROLE_ID) values (6, 'pthompson5', '$2a$10$JSbDc9v5q5LsECACWtuHo.C2P5HaiowcLb7grUgsV/2RrJDqIHQo6', 'Philip', 'Thompson', 'pthompson5@smugmug.com', 6);
insert into ERS_USERS (ERS_USERS_ID, ERS_USERNAME, ERS_PASSWORD, USER_FIRST_NAME, USER_LAST_NAME, USER_EMAIL, USER_ROLE_ID) values (7, 'bberry6', '$2a$10$N3Vzjxs4hDv5UDyjsOFbfuxgHrmiZyvy9IpTO5L3FVRhaehMZ0UeG', 'Bruce', 'Berry', 'bberry6@ted.com', 7);
insert into ERS_USERS (ERS_USERS_ID, ERS_USERNAME, ERS_PASSWORD, USER_FIRST_NAME, USER_LAST_NAME, USER_EMAIL, USER_ROLE_ID) values (8, 'jgibson7', '$2a$10$1xEq6hv6TI9eLu5hSibiXuyln4k1Tc0xpL4.TQ/.S8hLx1Exes8vq', 'Jacqueline', 'Gibson', 'jgibson7@gravatar.com', 8);
insert into ERS_USERS (ERS_USERS_ID, ERS_USERNAME, ERS_PASSWORD, USER_FIRST_NAME, USER_LAST_NAME, USER_EMAIL, USER_ROLE_ID) values (9, 'hwells8', '$2a$10$3gpdB3N3mOfyqTVI0M0YDerISe5rQDajiVidbizF24mSgZRo0OUZ6', 'Harold', 'Wells', 'hwells8@tumblr.com', 9);
insert into ERS_USERS (ERS_USERS_ID, ERS_USERNAME, ERS_PASSWORD, USER_FIRST_NAME, USER_LAST_NAME, USER_EMAIL, USER_ROLE_ID) values (10, 'jcarr9', '$2a$10$D88lT1uA38MTshDg9Htk5.7T69NZF38QNT7qur5bxemxP0XCOyebG', 'Julia', 'Carr', 'jcarr9@vkontakte.ru', 10);
insert into ERS_USERS (ERS_USERS_ID, ERS_USERNAME, ERS_PASSWORD, USER_FIRST_NAME, USER_LAST_NAME, USER_EMAIL, USER_ROLE_ID) values (11, 'rray0', '$2a$10$k9adJkVyINlOXlSIFrXwq.LSGaBjOh3vWQpMac0wuGX9cbxM9/vj2', 'Randy', 'Ray', 'rray0@webmd.com', 11);
commit;
/
